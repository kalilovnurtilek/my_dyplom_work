{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  {% if user.is_superuser %}
    <h1>–í—ã –∞–¥–º–∏–Ω</h1>
  {% else %}
    <h1>–≠—Ç–æ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
  {% endif %}

  {% if user.is_authenticated %}
    <div class="mb-3">
      <button><a href="{% url 'post-create' %}">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a></button>
      <br>
      {% if user.is_superuser %}
        <button><a href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a></button>
        <br>
        <button><a href="{% url 'admin-posts' %}">–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤</a></button>
        <br>
        <button><a href="{% url 'create-special' %}">–î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a></button>
        <br>
        <button><a href="{% url 'create-subject' %}">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</a></button>
      {% endif %}
    </div>

    <hr>

    <h2>üìù –ú–æ–∏ –ø–æ—Å—Ç—ã</h2>
    {% if my_posts %}
      <table class="table">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–î–∞—Ç–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</th> <!-- –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è -->
          </tr>
        </thead>
        <tbody>
          {% for post in my_posts %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></td>
              <td>{{ post.created|date:"d.m.Y H:i" }}</td>
              <td>{{ post.status }}</td>
              <td>
                {% if post.status_approval == 'not_started' %}
                  –û–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞
                {% elif post.status_approval == 'in_progress' %}
                  –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
                {% elif post.status_approval == 'approved' %}
                  ‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                {% elif post.status_approval == 'rejected' %}
                  ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
    {% endif %}

    <hr>

    <h2>üì• –ü–æ—Å—Ç—ã, –æ–∂–∏–¥–∞—é—â–∏–µ –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</h2>
    {% if approval_posts %}
      <table class="table">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–ê–≤—Ç–æ—Ä</th>
            <th>–î–∞—Ç–∞</th>
            <th>–°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</th> <!-- –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è -->
          </tr>
        </thead>
        <tbody>
          {% for post in approval_posts %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></td>
              <td>{{ post.owner.get_full_name|default:post.owner.email }}</td>
              <td>{{ post.created|date:"d.m.Y H:i" }}</td>
              <td>
                {% if post.status_approval == 'not_started' %}
                  –û–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞
                {% elif post.status_approval == 'in_progress' %}
                  –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
                {% elif post.status_approval == 'approved' %}
                  ‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                {% elif post.status_approval == 'rejected' %}
                  ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>–ù–µ—Ç –ø–æ—Å—Ç–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è.</p>
    {% endif %}

    <hr>

    <h2>‚úÖ –ü–æ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É–∂–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–ª–∏</h2>
    {% if approved_posts %}
      <table class="table">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–ê–≤—Ç–æ—Ä</th>
            <th>–î–∞—Ç–∞</th>
            <th>–°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</th> <!-- –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è -->
          </tr>
        </thead>
        <tbody>
          {% for post in approved_posts %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></td>
              <td>{{ post.owner.get_full_name|default:post.owner.email }}</td>
              <td>{{ post.created|date:"d.m.Y H:i" }}</td>
              <td>
                {% if post.status_approval == 'not_started' %}
                  –û–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞
                {% elif post.status_approval == 'in_progress' %}
                  –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
                {% elif post.status_approval == 'approved' %}
                  ‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ
                {% elif post.status_approval == 'rejected' %}
                  ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>–ù–µ—Ç –ø–æ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É–∂–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–ª–∏.</p>
    {% endif %}

  {% else %}
    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã.</p>
  {% endif %}
</div>
{% endblock %}
